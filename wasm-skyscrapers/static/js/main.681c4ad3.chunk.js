(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{141:function(e,t,n){e.exports=n(302)},146:function(e,t,n){},148:function(e,t,n){},302:function(e,t,n){"use strict";n.r(t);var r=n(1),a=n.n(r),o=n(9),l=n.n(o),c=(n(146),n(36)),s=n(65),i=n(66),u=n(69),f=n(67),h=n(68),m=n(309),d=n(308),p=n(303),v=n(304),E=n(306),y=n(64),g=n(307);n(148);function b(e){var t=function(e,t){var n=[e],r=null;for(;-1!==(r=n.findIndex(function(e){return!(t=e).every(function(e,n){return-1===k(t,n,!0).indexOf(0)});var t}));){var a=n[r];n.splice(r,1),n=(n=n.concat(O(a))).filter(function(e){return j(e,t)})}return n}(function(e){var t=e.slice(0,4),n=e.slice(4,8),r=e.slice(8,12).reverse(),a=e.slice(12,16).reverse(),o=[[0,0,0,0],[0,0,0,0],[0,0,0,0],[0,0,0,0]];return t.forEach(function(e,t){4===e&&(o=S(o,t,!1,[1,2,3,4])),1===e&&(o=S(o,t,!1,[4,0,0,0]))}),r.forEach(function(e,t){4===e&&(o=S(o,t,!1,[4,3,2,1])),1===e&&(o=S(o,t,!1,[0,0,0,4]))}),a.forEach(function(e,t){4===e&&(o=S(o,t,!0,[1,2,3,4])),1===e&&(o=S(o,t,!0,[4,0,0,0]))}),n.forEach(function(e,t){4===e&&(o=S(o,t,!0,[4,3,2,1])),1===e&&(o=S(o,t,!0,[0,0,0,4]))}),o}(e),e);if(0===t.length)throw new Error("ouch, no solution found");return t.length>=2&&console.error(new Error("ouch, solution is not unique")),t[0]}function w(e){return e.map(function(e){return e.map(function(e){return e})})}function k(e,t,n){var r=w(e);return n?r[t]:r.map(function(e){return e[t]})}function S(e,t,n,r){var a=w(e);return n?(r.forEach(function(e,n){a[t][n]=e}),a):(r.forEach(function(e,n){a[n][t]=e}),a)}function x(e,t){var n=t.x,r=t.y;return e.reduce(function(e,t){return n===t.x?e+1:e},0)+e.reduce(function(e,t){return r===t.y?e+1:e},0)}function O(e){var t=function(e){var t=[];return e.forEach(function(e,n){e.forEach(function(e,r){0===e&&t.push({x:r,y:n})})}),t.sort(function(e,n){return x(t,e)-x(t,n)}),t}(e);if(0===t.length)throw new Error("matrix already completed");var n=t[0],r=n.x,a=n.y;return function(e,t,n){var r=[1,2,3,4],a=k(e,n,!0),o=k(e,t,!1),l=!0,c=!1,s=void 0;try{for(var i,u=[].concat(a,o)[Symbol.iterator]();!(l=(i=u.next()).done);l=!0){var f=i.value;-1!==r.indexOf(f)&&r.splice(r.indexOf(f),1)}}catch(h){c=!0,s=h}finally{try{l||null==u.return||u.return()}finally{if(c)throw s}}return r}(e,r,a).map(function(t){var n=w(e);return n[a][r]=t,n})}function z(e){var t=0,n=0,r=!0,a=!1,o=void 0;try{for(var l,c=e[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var s=l.value;s>n&&(t+=1,n=s)}}catch(i){a=!0,o=i}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return t}function j(e,t){for(var n=function(e){for(var t=[],n=[],r=[],a=[],o=0;o<e[0].length;++o)-1===k(e,o,!0).indexOf(0)?(r.push(z(k(e,o,!0))),a.push(z(k(e,o,!0).reverse()))):(r.push(0),a.push(0));for(var l=0;l<e.length;++l)-1===k(e,l,!1).indexOf(0)?(t.push(z(k(e,l,!1))),n.push(z(k(e,l,!1).reverse()))):(t.push(0),n.push(0));return[].concat(t,a,n.reverse(),r.reverse())}(e),r=0;r<n.length&&r<t.length;++r)if(0!==n[r]&&0!==t[r]&&n[r]!=t[r])return!1;return!0}var _=m.a.Header,A=m.a.Content,M=d.a.Group,I=function(e){var t=window._buildSkyScrapers,n=new Int32Array(e.length);e.forEach(function(e,t){n[t]=e});var r=window.Module._malloc(n.length*n.BYTES_PER_ELEMENT);window.Module.HEAP32.set(n,r>>2);for(var a=t(r,n.length),o=[],l=0;l<16;++l)o.push(window.Module.HEAP32[a/Int32Array.BYTES_PER_ELEMENT+l]);return window.Module._free(r),[o.slice(0,4),o.slice(4,8),o.slice(8,12),o.slice(12,16)]},C=function(e){return e.map(function(e){return e.map(function(e){return e})})},P=function(e,t,n){var r=C(e);return n?r[t]:r.map(function(e){return e[t]})},H=function(e){var t=e.map(function(e){return e});return t.sort(function(e,t){return e-t}),function(e,t){if(Array.isArray(e)&&Array.isArray(t)&&e.length===t.length){for(var n=0;n<e.length;++n)if(e[n]!==t[n])return!1;return!0}return!1}(t,[1,2,3,4])},L=function(e){if(!H(e))return"X";var t=0,n=0,r=!0,a=!1,o=void 0;try{for(var l,c=e[Symbol.iterator]();!(r=(l=c.next()).done);r=!0){var s=l.value;s>n&&(t+=1,n=s)}}catch(i){a=!0,o=i}finally{try{r||null==c.return||c.return()}finally{if(a)throw o}}return t},B=function(e){for(var t=[],n=[],r=[],a=[],o=0;o<e[0].length;++o)r.push(L(P(e,o,!0))),a.push(L(P(e,o,!0).reverse()));for(var l=0;l<e.length;++l)t.push(L(P(e,l,!1))),n.push(L(P(e,l,!1).reverse()));return[].concat(t,a,n.reverse(),r.reverse())},T=function(e){return-1===B(e).indexOf("X")},W=function(e){function t(){return Object(s.a)(this,t),Object(u.a)(this,Object(f.a)(t).apply(this,arguments))}return Object(h.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e={width:"15%",textAlign:"center"},t=C(this.props.data),n=this.props.onMatrixChange||function(){};return a.a.createElement("span",null,t.map(function(t,r){return a.a.createElement(M,{key:"row_".concat(r),compact:!0},t.map(function(t,o){return a.a.createElement(d.a,{key:"cell_".concat(o),style:e,value:t,defaultValue:"0",onChange:function(e){return n(e.target.value,{row:o,col:r})},maxLength:1,type:"number",onMouseOver:function(e){e.target.select()}})}))}))}}]),t}(r.Component),J=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(f.a)(t).call(this,e))).state={isLoading:!1,isError:!1,message:"",result:null},n.benchmark=n.benchmark.bind(Object(c.a)(Object(c.a)(n))),n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"benchmark",value:function(){this.setState({isLoading:!0,isError:!1,message:"",result:null});var e=new window.Benchmark.Suite,t=this,n=null,r=!1,a="",o=B(t.props.data);t.setState({isError:!1,message:"Observed: [".concat(o.join(", "),"]")}),"function"===typeof t.props.solvePuzzle?e.add("test",function(){try{n=t.props.solvePuzzle(o)}catch(e){r=!0,a=e.toString()}}):Array.isArray(t.props.solvePuzzle)&&t.props.solvePuzzle.every(function(e){return"function"===typeof e})&&(t.props.solvePuzzle.forEach(function(t){e.add("test#".concat(t.name),function(){try{n=t(o)}catch(e){r=!0,a=e.toString()}})}),e.on("complete",function(){t.setState({message:"".concat(t.state.message," Fastest is ").concat(this.filter("fastest").map("name"))})})),e.on("cycle",function(e){t.setState({isError:!1,message:"".concat(t.state.message," ").concat(String(e.target))})}).on("complete",function(){t.setState({isLoading:!1,result:n,isError:r,message:a||t.state.message})}).run({async:!0})}},{key:"formatForTable",value:function(e,t){return e.map(function(e,n){return e.reduce(function(e,n,r){return e[r]=t?"X":n,e},{key:"row_".concat(n)})})}},{key:"genSkyScrapers",value:function(e,t){var n=[{dataIndex:"0",align:"center"}],r=[{dataIndex:"0",align:"center"},{dataIndex:"1",align:"center"},{dataIndex:"2",align:"center"},{dataIndex:"3",align:"center"}];return a.a.createElement("span",null,a.a.createElement(p.a,null,a.a.createElement(v.a,{span:14,offset:5},a.a.createElement(E.a,{columns:r,dataSource:[{key:"row_top",0:L(P(e,0,!1)),1:L(P(e,1,!1)),2:L(P(e,2,!1)),3:L(P(e,3,!1))}],showHeader:!1,size:"small",pagination:!1,bordered:!0}))),a.a.createElement("br",null),a.a.createElement(p.a,null,a.a.createElement(v.a,{span:4},a.a.createElement(E.a,{columns:n,dataSource:[{key:"left_0",0:L(P(e,0,!0))},{key:"left_1",0:L(P(e,1,!0))},{key:"left_2",0:L(P(e,2,!0))},{key:"left_3",0:L(P(e,3,!0))}],showHeader:!1,size:"small",pagination:!1,bordered:!0})),a.a.createElement(v.a,{span:14,offset:1},a.a.createElement(E.a,{columns:r,dataSource:this.formatForTable(e,t),showHeader:!1,size:"small",pagination:!1,bordered:!0})),a.a.createElement(v.a,{span:4,offset:1},a.a.createElement(E.a,{columns:n,dataSource:[{key:"right_0",0:L(P(e,0,!0).reverse())},{key:"right_1",0:L(P(e,1,!0).reverse())},{key:"right_2",0:L(P(e,2,!0).reverse())},{key:"right_3",0:L(P(e,3,!0).reverse())}],showHeader:!1,size:"small",pagination:!1,bordered:!0}))),a.a.createElement("br",null),a.a.createElement(p.a,null,a.a.createElement(v.a,{span:14,offset:5},a.a.createElement(E.a,{columns:r,dataSource:[{key:"row_bottom",0:L(P(e,0,!1).reverse()),1:L(P(e,1,!1).reverse()),2:L(P(e,2,!1).reverse()),3:L(P(e,3,!1).reverse())}],showHeader:!1,size:"small",pagination:!1,bordered:!0}))))}},{key:"render",value:function(){var e=C(this.props.data),t=this.props.masked;return a.a.createElement("span",{style:{width:"40%"}},this.genSkyScrapers(e,t),this.props.masked?a.a.createElement("hr",null):null,this.props.masked?a.a.createElement(y.a,{type:"primary",size:"large",loading:this.state.isLoading,onClick:this.benchmark,disabled:!T(this.props.data)},"Benchmark"):null,this.state.message?a.a.createElement("h1",{style:{color:this.state.isError?"red":"green"}},this.state.message):null,this.state.result?this.genSkyScrapers(e,!1):null)}}]),t}(r.Component),N=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(u.a)(this,Object(f.a)(t).call(this,e))).state={data:[[1,2,3,4],[2,4,1,3],[4,3,2,1],[3,1,4,2]]},n.onMatrixChange=n.onMatrixChange.bind(Object(c.a)(Object(c.a)(n))),n}return Object(h.a)(t,e),Object(i.a)(t,[{key:"onMatrixChange",value:function(e,t){var n=t.row,r=t.col,a=C(this.state.data);a[r][n]=parseInt(e,10),this.setState({data:a})}},{key:"render",value:function(){return a.a.createElement("div",{className:"App"},a.a.createElement(_,{className:"App-header"},"A good day to WASM"),a.a.createElement(A,{style:{padding:"50px 50px"}},a.a.createElement(p.a,null,a.a.createElement(v.a,{span:10,offset:7},a.a.createElement(g.a,null,a.a.createElement("h1",null,"Sky Scrapers"),a.a.createElement(W,{data:this.state.data,onMatrixChange:this.onMatrixChange}),a.a.createElement("hr",null),a.a.createElement(J,{data:this.state.data}),a.a.createElement("br",null),T(this.state.data)?a.a.createElement("h1",{style:{color:"green"}},"Valid"):a.a.createElement("h1",{style:{color:"red"}},"Invalid")))),a.a.createElement("br",null),a.a.createElement(p.a,null,a.a.createElement(v.a,{span:10,offset:1},a.a.createElement(g.a,null,a.a.createElement("h1",null,"Vanilla JS"),a.a.createElement(J,{data:this.state.data,solvePuzzle:b,masked:!0}))),a.a.createElement(v.a,{span:10,offset:2},a.a.createElement(g.a,null,a.a.createElement("h1",null,"WASM Interoperate"),a.a.createElement(J,{data:this.state.data,solvePuzzle:I,masked:!0})))),a.a.createElement("br",null),a.a.createElement(p.a,null,a.a.createElement(v.a,{span:10,offset:7},a.a.createElement(g.a,null,a.a.createElement("h1",null,"Vanilla JS vs. WASM Interoperate"),a.a.createElement(J,{data:this.state.data,solvePuzzle:[b,I],masked:!0}))))))}}]),t}(r.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));l.a.render(a.a.createElement(N,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[141,2,1]]]);
//# sourceMappingURL=main.681c4ad3.chunk.js.map